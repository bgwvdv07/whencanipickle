<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <title>whencanipickle.nyc</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #2c2c2c;
        color: #ddd;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        overflow-x: hidden;
      }
      .container {
        background-color: #333;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        max-width: 500px;
        width: 90%;
        text-align: center;
        position: relative;
        z-index: 1;
      }
      h1 {
        color: #3498db;
        margin-bottom: 0.5rem;
        font-size: 2rem;
      }
      h2 {
        color: #777;
        margin-bottom: 1.5rem;
        font-size: 1rem;
        font-weight: normal;
      }
      #result {
        text-align: left;
        white-space: pre-line;
        background-color: #444;
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 1.5rem;
        font-size: 1rem;
        line-height: 1.8;
      }
      .loading {
        color: #777;
        font-style: italic;
      }
      .pickleball,
      .paddle {
        position: absolute;
        z-index: 0;
        background-size: cover;
      }
      .pickleball {
        width: 10%;
        height: 10%;
        background: url("ball.png") no-repeat center/contain;
      }

      .paddle {
        width: 20%;
        height: 20%;
      }

      .paddle.blue {
        background: url("bluepad.png") no-repeat center/contain;
      }
      .paddle.green {
        background: url("greenpad.png") no-repeat center/contain;
      }
      .paddle.peach {
        background: url("peachpad.png") no-repeat center/contain;
      }
      .paddle.pink {
        background: url("pinkpad.png") no-repeat center/contain;
      }
      .paddle.yellow {
        background: url("yellowpad.png") no-repeat center/contain; /* Assuming you have a fifth paddle image */
      }
      .social-icon {
        position: absolute;
        bottom: 100px;
        left: 50%;
        /* transform: translateX(-50%); */
        font-size: 2rem;
        color: #0077b5;
        transition: color 0.3s ease;
      }
      .social-icon:hover {
        color: #00a0dc;
      }
    </style>
  </head>
  <body>
    <!-- Pickleballs -->
    <div class="pickleball" style="top: 10%; left: 10%"></div>
    <div class="pickleball" style="top: 75%; right: 15%"></div>
    <div class="pickleball" style="top: 30%; right: 15%"></div>
    <div class="pickleball" style="bottom: 15%; left: 10%"></div>

    <!-- Paddles -->
    <div
      class="paddle blue"
      style="top: 15%; left: 20%; transform: rotate(45deg)"
    ></div>
    <div
      class="paddle green"
      style="top: 70%; left: 20%; transform: rotate(20deg)"
    ></div>
    <div
      class="paddle peach"
      style="top: 45%; right: 15%; transform: rotate(15deg)"
    ></div>
    <div
      class="paddle pink"
      style="top: 5%; right: 30%; transform: rotate(-35deg)"
    ></div>

    <div class="container">
      <h1>When can I play pickleball in NYC?</h1>
      <h2>the next time the weather is good for pickleball</h2>
      <p id="result" class="loading">Checking weather forecast...</p>
    </div>

    <script>
      function checkPickleballWeather() {
        const latitude = 40.7829;
        const longitude = -73.9654;

        fetch(`https://api.weather.gov/points/${latitude},${longitude}`)
          .then((response) => response.json())
          .then((data) => {
            return fetch(data.properties.forecastHourly);
          })
          .then((response) => response.json())
          .then((data) => {
            const forecasts = data.properties.periods;
            let goodTime = null;

            for (let forecast of forecasts) {
              const temp = forecast.temperature;
              const startTime = new Date(forecast.startTime);
              const hours = startTime.getHours();
              const isRainy =
                forecast.shortForecast.toLowerCase().includes("rain") ||
                forecast.shortForecast.toLowerCase().includes("shower");
              const humidity = forecast.relativeHumidity.value;
              const windSpeed = parseInt(
                forecast.windSpeed.replace(/ mph/, "")
              );

              if (
                temp >= 60 &&
                temp <= 85 &&
                hours >= 8 &&
                hours <= 22 &&
                humidity <= 55 &&
                windSpeed < 14 &&
                !isRainy
              ) {
                goodTime = forecast;
                break;
              }
            }

            const resultElement = document.getElementById("result");
            resultElement.classList.remove("loading");

            if (goodTime) {
              const date = new Date(goodTime.startTime);
              const weekdays = [
                "Sunday",
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday",
              ];
              const weekday = weekdays[date.getDay()];
              const now = new Date();
              const dayDifference = Math.floor(
                (date - now) / (1000 * 60 * 60 * 24)
              );

              let relativeDay;
              if (dayDifference === 0) {
                relativeDay = "Today";
              } else if (dayDifference === 1) {
                relativeDay = "Tomorrow";
              } else {
                relativeDay = dayDifference + " days from now";
              }

              let resultText = "🎾 Good news! You can play pickleball:\n";
              resultText += `📅 ${relativeDay} - ${
                weekdays[date.getDay()]
              }, ${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {
                hour: "2-digit",
                minute: "2-digit",
              })}\n\n`;
              resultText += `🌡️ Temperature: ${goodTime.temperature}°F\n`;
              resultText += `💧 Humidity: ${goodTime.relativeHumidity.value}%\n`;
              resultText += `☁️ Conditions: ${goodTime.shortForecast}\n`;
              resultText += `💨 Wind: ${goodTime.windSpeed} ${goodTime.windDirection}`;
              resultElement.innerText = resultText;
            } else {
              resultElement.innerText =
                "😔  Darn! No good pickleball weather in the next week.  Maybe the week after! 🥒";
            }
          })
          .catch((error) => {
            const resultElement = document.getElementById("result");
            resultElement.classList.remove("loading");
            resultElement.innerText = "";
            console.error("Error:", error);
          });
      }

      checkPickleballWeather();
    </script>
    <a
      href="https://www.linkedin.com/in/chanstan"
      target="_blank"
      class="social-icon"
    >
      <i class="fab fa-linkedin"></i>
    </a>
  </body>
</html>
